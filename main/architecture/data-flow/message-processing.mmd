%% Data Flow: Message Processing
flowchart LR
  classDef datamodel fill:#e8f5e9,stroke:#2e7d32
  classDef process fill:#e3f2fd,stroke:#1565c0

  S[String or Dict]:::datamodel
  M[Message]:::datamodel
  ML[MessageList]:::datamodel
  L[LLM]:::process
  CR[ChatResponse]:::datamodel
  CO[CompletionResponse]:::datamodel
  P[Parsed Output]:::process

  S --> M
  M --> ML
  ML --> L
  L --> CR
  L --> CO
  CR --> P
  CO --> P
