
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="LLM package" name="description"/>
<link href="https://serapieum-of-alex.github.io/Serapeum/develop/reference/core/llms/orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_components/" rel="canonical"/>
<link href="../../../../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Component Boundaries and Interactions - Serapeum</title>
<link href="../../../../../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../../../../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../../../../../assets/stylesheets/panzoom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<meta name="panzoom-theme" content="material">
<meta name="panzoom-data" content='{"selectors": [".mermaid", ".d2"], "initial_zoom_level": 1.0}'> </head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#component-boundaries-and-interactions">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Serapeum" class="md-header__button md-logo" data-md-component="logo" href="../../../../../.." title="Serapeum">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Serapeum
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Component Boundaries and Interactions
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="purple" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="teal" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="lime" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/Serapieum-of-alex/Serapeum" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    Serapieum-of-alex/Serapeum
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../../developer-guide/installation/">
          
  
  
    
  
  Developer Guide

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../../overview/codebase-map/">
          
  
  
    
  
  Overview

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../../architecture/diagrams.md">
          
  
  
    
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../code/llm/llm-classes-comparison.md">
          
  
  
    
  
  Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../../change-log/">
          
  
  
    
  
  About

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Serapeum" class="md-nav__button md-logo" data-md-component="logo" href="../../../../../.." title="Serapeum">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Serapeum
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/Serapieum-of-alex/Serapeum" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    Serapieum-of-alex/Serapeum
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Developer Guide
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../developer-guide/installation/">
<span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../developer-guide/contributing/">
<span class="md-ellipsis">
    
  
    contributing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../developer-guide/taskfile/">
<span class="md-ellipsis">
    
  
    Taskfile
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../overview/codebase-map/">
<span class="md-ellipsis">
    
  
    Codebase Map
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../architecture/diagrams.md">
<span class="md-ellipsis">
    
  
    Diagrams
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Core
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1_1" id="__nav_5_1_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    llms
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_1_1">
<span class="md-nav__icon md-icon"></span>
            
  
    llms
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../code/llm/llm-classes-comparison.md">
<span class="md-ellipsis">
    
  
    LLM Classes Comparison
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1_2" id="__nav_5_1_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    orchestrators
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_1_2">
<span class="md-nav__icon md-icon"></span>
            
  
    orchestrators
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1_2_1" id="__nav_5_1_2_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Text Completion LLM
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_2_1_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_1_2_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Text Completion LLM
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/general.md">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/examples.md">
<span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/text_completion_llm_sequence.md">
<span class="md-ellipsis">
    
  
    Execution Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/text_completion_llm_class.md">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/text_completion_llm_dataflow.md">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/text_completion_llm_components.md">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/text_completion_llm/text_completion_llm_state.md">
<span class="md-ellipsis">
    
  
    Lifecycle
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1_2_2" id="__nav_5_1_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Tool Orchestrating LLM
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_2_2_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_1_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Tool Orchestrating LLM
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/general.md">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/examples.md">
<span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_sequence.md">
<span class="md-ellipsis">
    
  
    Execution Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_class.md">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_dataflow.md">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_components.md">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_state.md">
<span class="md-ellipsis">
    
  
    Lifecycle
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1_3" id="__nav_5_1_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    tools
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_1_3">
<span class="md-nav__icon md-icon"></span>
            
  
    tools
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../tools/tools/">
<span class="md-ellipsis">
    
  
    serapeum.core.tools — Developer Documentation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../tools/callable_tools/">
<span class="md-ellipsis">
    
  
    Callable Tools
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Libs
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Libs
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2_1" id="__nav_5_2_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Providers
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_2_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Providers
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2_1_1" id="__nav_5_2_1_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Ollama
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_1_1_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_2_1_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Ollama
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/general/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/examples/">
<span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/ollama_sequence/">
<span class="md-ellipsis">
    
  
    Execution Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/ollama_class/">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/ollama_dataflow/">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/ollama_components/">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../providers/ollama/ollama_state/">
<span class="md-ellipsis">
    
  
    Lifecycle
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    About
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../change-log/">
<span class="md-ellipsis">
    
  
    Change-log
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../contributing.md">
<span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../../LICENSE/">
<span class="md-ellipsis">
    
  
    License
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#component-responsibilities-matrix">
<span class="md-ellipsis">
      
        Component Responsibilities Matrix
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#interaction-patterns">
<span class="md-ellipsis">
      
        Interaction Patterns
      
    </span>
</a>
<nav aria-label="Interaction Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-initialization-pattern-constructor">
<span class="md-ellipsis">
      
        1. Initialization Pattern (Constructor)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-standard-execution-pattern-sync">
<span class="md-ellipsis">
      
        2. Standard Execution Pattern (Sync)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-parallel-execution-pattern">
<span class="md-ellipsis">
      
        3. Parallel Execution Pattern
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-async-execution-pattern">
<span class="md-ellipsis">
      
        4. Async Execution Pattern
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-streaming-execution-pattern-sync">
<span class="md-ellipsis">
      
        5. Streaming Execution Pattern (Sync)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-async-streaming-pattern">
<span class="md-ellipsis">
      
        6. Async Streaming Pattern
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#state-management">
<span class="md-ellipsis">
      
        State Management
      
    </span>
</a>
<nav aria-label="State Management" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#immutable-state-post-initialization">
<span class="md-ellipsis">
      
        Immutable State (Post-Initialization)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mutable-state">
<span class="md-ellipsis">
      
        Mutable State
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transient-state-per-call">
<span class="md-ellipsis">
      
        Transient State (Per Call)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#streaming-state-per-stream">
<span class="md-ellipsis">
      
        Streaming State (Per Stream)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-flow-between-components">
<span class="md-ellipsis">
      
        Data Flow Between Components
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-boundaries">
<span class="md-ellipsis">
      
        Error Boundaries
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/Serapieum-of-alex/Serapeum/edit/master/docs/reference/core/llms/orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_components.md" rel="edit" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
</a>
<a class="md-content__button md-icon" href="https://github.com/Serapieum-of-alex/Serapeum/raw/master/docs/reference/core/llms/orchestrators/tool_orchestrating_llm/tool_orchestrating_llm_components.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
</a>
<h1 id="component-boundaries-and-interactions"><a class="toclink" href="#component-boundaries-and-interactions">Component Boundaries and Interactions</a><a class="headerlink" href="#component-boundaries-and-interactions" title="Permanent link">#</a></h1>
<p>This diagram shows how components interact during the complete lifecycle.</p>
<div class="panzoom-box" data-key="ctrl" id="panzoom0" oncontextmenu="return false;">
<div class="panzoom-info-box panzoom-info-box-top panzoom-hidden">
Hold "Ctrl" to enable pan &amp; zoom
</div>
<nav class="panzoom-nav panzoom-top-nav">
<button class="panzoom-info panzoom-button">
<svg class="panzoom-icon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
</svg>
</button><button class="panzoom-reset panzoom-button">
<svg class="panzoom-icon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"></path>
</svg>
</button><button class="panzoom-max panzoom-button">
<svg class="panzoom-icon" viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
<path d="M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"></path>
</svg>
</button><button class="panzoom-min panzoom-button panzoom-hidden">
<svg class="panzoom-icon" viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
<path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"></path>
</svg>
</button>
</nav>
<pre class="mermaid"><code>graph TB
    subgraph User Space
        UC[User Code]
        MA[MockAlbum Schema]
        MS[MockSong Schema]
    end

    subgraph ToolOrchestratingLLM Components
        TOL[ToolOrchestratingLLM]

        subgraph Validators
            VL[validate_llm]
            VP[validate_prompt]
        end

        subgraph Stored State
            SL["_llm: FunctionCallingLLM"]
            SP["_prompt: BasePromptTemplate"]
            SO["_output_cls: Type[MockAlbum]"]
            SV["_verbose: bool"]
            SAP["_allow_parallel_tool_calls: bool"]
            STC["_tool_choice: Optional"]
        end

        subgraph Execution Methods
            CALL["__call__"]
            ACALL["acall"]
            STREAM["stream_call"]
            ASTREAM["astream_call"]
        end
    end

    subgraph Tool Layer
        CT[CallableTool]

        subgraph Tool Operations
            FM[from_model]
            ES[extract_schema]
            TC[tool.call]
        end
    end

    subgraph Prompt Layer
        PT[PromptTemplate]
        CPT[ChatPromptTemplate]

        subgraph Prompt Operations
            FMS[format_messages]
            AV[Apply Variables]
            GT[get_template]
        end
    end

    subgraph LLM Layer - FunctionCallingLLM
        OL[Ollama]

        subgraph Orchestration Methods
            PAC[predict_and_call]
            APAC[apredict_and_call]
            SCT[stream_chat_with_tools]
            ASCT[astream_chat_with_tools]
        end

        subgraph Message Processing
            EM[_extend_messages]
            PM[_prepare_chat_with_tools]
        end

        subgraph Tool Schema
            PTS[_prepare_tools_schema]
        end

        MD[metadata]
    end

    subgraph External Service
        OS[Ollama Server]

        subgraph Endpoints
            EC["/api/chat"]
            EG["/api/generate"]
        end
    end

    subgraph Response Models
        ACR[AgentChatResponse]

        subgraph Response Components
            RES[response: str]
            SRC["sources: List[ToolOutput]"]
        end

        subgraph Parsing Methods
            PTO[parse_tool_outputs]
        end
    end

    subgraph Tool Output
        TOUT[ToolOutput]

        subgraph Output Fields
            TCONT[content]
            TNAME[tool_name]
            TINPUT[raw_input]
            TOUTPUT[raw_output: MockAlbum]
        end
    end

    subgraph Streaming Support
        SOP[StreamingObjectProcessor]

        subgraph Processor Methods
            PROC[process]
            PS[Parse partial JSON]
            US[Update state]
        end
    end

    %% Initialization Flow
    UC --&gt;|1. Create instance| TOL
    TOL --&gt;|Validate| VL
    VL --&gt;|Check metadata| MD
    MD --&gt;|is_function_calling_model| VL
    VL --&gt;|Store| SL

    TOL --&gt;|Validate/Convert| VP
    VP --&gt;|Create if string| PT
    VP --&gt;|Store| SP

    TOL --&gt;|Store| SO
    TOL --&gt;|Store| SV
    TOL --&gt;|Store| SAP
    TOL --&gt;|Store| STC

    MA --&gt;|Defines schema| SO

    %% Execution Flow - Standard Call
    UC --&gt;|2. Call with kwargs| CALL
    CALL --&gt;|Create tool| FM
    FM --&gt;|Extract schema from| MA
    FM --&gt;|Returns| CT

    CALL --&gt;|Format with kwargs| FMS
    FMS --&gt;|Uses template| PT
    FMS --&gt;|Apply variables| AV
    AV --&gt;|Returns| Messages

    CALL --&gt;|Extend| EM
    EM --&gt;|Add system prompts| Messages

    CALL --&gt;|Invoke| PAC
    PAC --&gt;|Prepare| PM
    PM --&gt;|Add tools| PTS
    PTS --&gt;|From| CT

    PAC --&gt;|HTTP POST| EC
    EC --&gt;|In| OS
    OS --&gt;|Returns| Response

    PAC --&gt;|Parse tool_calls| Response
    PAC --&gt;|Execute| TC
    TC --&gt;|Validate against| MA
    TC --&gt;|Create instance| MA
    TC --&gt;|Wrap in| TOUT

    PAC --&gt;|Create| ACR
    ACR --&gt;|Contains| TOUT
    ACR --&gt;|In| SRC

    CALL --&gt;|Parse| PTO
    PTO --&gt;|Extract from| SRC
    PTO --&gt;|Get| TOUTPUT
    TOUTPUT --&gt;|Returns| MA

    MA --&gt;|Instance to| UC

    %% Async Flow
    UC --&gt;|3. Async call| ACALL
    ACALL --&gt;|Invoke| APAC
    APAC --&gt;|Similar flow| PAC

    %% Streaming Flow
    UC --&gt;|4. Stream call| STREAM
    STREAM --&gt;|Invoke| SCT
    SCT --&gt;|Yields chunks| Response

    STREAM --&gt;|Process| PROC
    PROC --&gt;|Uses| SOP
    SOP --&gt;|Parse| PS
    PS --&gt;|Update| US
    US --&gt;|Yields partial| MA

    %% Async Streaming Flow
    UC --&gt;|5. Async stream| ASTREAM
    ASTREAM --&gt;|Invoke| ASCT
    ASCT --&gt;|Similar flow| SCT

    %% Parallel Tool Calls
    SAP --&gt;|If True| PTO
    PTO --&gt;|Returns List| MA

    %% Styling
    classDef userClass fill:#e1f5ff,stroke:#01579b
    classDef validatorClass fill:#fff9c4,stroke:#f57f17
    classDef stateClass fill:#f3e5f5,stroke:#4a148c
    classDef toolClass fill:#e8f5e9,stroke:#1b5e20
    classDef promptClass fill:#fce4ec,stroke:#880e4f
    classDef llmClass fill:#e0f2f1,stroke:#004d40
    classDef responseClass fill:#fff3e0,stroke:#e65100
    classDef externalClass fill:#efebe9,stroke:#3e2723
    classDef streamClass fill:#e3f2fd,stroke:#0d47a1

    class UC,MA,MS userClass
    class VL,VP validatorClass
    class SL,SP,SO,SV,SAP,STC stateClass
    class CT,FM,ES,TC toolClass
    class PT,CPT,FMS,AV,GT promptClass
    class OL,PAC,APAC,SCT,ASCT,EM,PM,PTS,MD llmClass
    class ACR,RES,SRC,PTO responseClass
    class TOUT,TCONT,TNAME,TINPUT,TOUTPUT responseClass
    class OS,EC,EG externalClass
    class SOP,PROC,PS,US streamClass</code></pre>
</div>
<h2 id="component-responsibilities-matrix"><a class="toclink" href="#component-responsibilities-matrix">Component Responsibilities Matrix</a><a class="headerlink" href="#component-responsibilities-matrix" title="Permanent link">#</a></h2>
<table>
<thead>
<tr>
<th>Component</th>
<th>Initialization</th>
<th>Execution</th>
<th>Parsing</th>
<th>Streaming</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ToolOrchestratingLLM</strong></td>
<td>Validates &amp; stores components</td>
<td>Routes to predict_and_call</td>
<td>Extracts from AgentChatResponse</td>
<td>Processes with StreamingObjectProcessor</td>
</tr>
<tr>
<td><strong>CallableTool</strong></td>
<td>-</td>
<td>Created from Pydantic model</td>
<td>Validates tool arguments</td>
<td>-</td>
</tr>
<tr>
<td><strong>PromptTemplate</strong></td>
<td>Created/validated</td>
<td>Formats with variables</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>Ollama</strong></td>
<td>Validated for function calling</td>
<td>Executes predict_and_call</td>
<td>-</td>
<td>Streams chat_with_tools</td>
</tr>
<tr>
<td><strong>AgentChatResponse</strong></td>
<td>-</td>
<td>Created by LLM</td>
<td>Contains ToolOutputs</td>
<td>-</td>
</tr>
<tr>
<td><strong>ToolOutput</strong></td>
<td>-</td>
<td>Created by tool execution</td>
<td>Contains raw_output (Pydantic)</td>
<td>-</td>
</tr>
<tr>
<td><strong>MockAlbum</strong></td>
<td>Defines schema</td>
<td>-</td>
<td>Validates parsed data</td>
<td>Progressively built</td>
</tr>
<tr>
<td><strong>StreamingObjectProcessor</strong></td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>Parses partial responses</td>
</tr>
</tbody>
</table>
<h2 id="interaction-patterns"><a class="toclink" href="#interaction-patterns">Interaction Patterns</a><a class="headerlink" href="#interaction-patterns" title="Permanent link">#</a></h2>
<h3 id="1-initialization-pattern-constructor"><a class="toclink" href="#1-initialization-pattern-constructor">1. Initialization Pattern (Constructor)</a><a class="headerlink" href="#1-initialization-pattern-constructor" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>User → ToolOrchestratingLLM.__init__
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>  ├─→ validate_llm
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>  │   ├─→ Use provided or fallback to Configs.llm
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>  │   └─→ Check metadata.is_function_calling_model == True
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>  ├─→ validate_prompt
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>  │   └─→ Convert string to PromptTemplate if needed
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>  └─→ Store all components:
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>      ├─→ _output_cls (MockAlbum)
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>      ├─→ _llm (Ollama)
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>      ├─→ _prompt (PromptTemplate)
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>      ├─→ _verbose
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>      ├─→ _allow_parallel_tool_calls
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>      └─→ _tool_choice
</code></pre></div>
<h3 id="2-standard-execution-pattern-sync"><a class="toclink" href="#2-standard-execution-pattern-sync">2. Standard Execution Pattern (Sync)</a><a class="headerlink" href="#2-standard-execution-pattern-sync" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>User → ToolOrchestratingLLM.__call__(topic="songs")
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>  ├─→ CallableTool.from_model(MockAlbum)
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>  │   ├─→ Extract JSON schema from MockAlbum
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>  │   └─→ Create callable tool with validation
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>  ├─→ PromptTemplate.format_messages(topic="songs")
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>  │   ├─→ Apply template variables
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>  │   └─→ Return List[Message]
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>  ├─→ Ollama._extend_messages(messages)
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>  │   └─→ Add system prompts if configured
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>  ├─→ Ollama.predict_and_call([tool], messages, ...)
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>  │   ├─→ Prepare chat request with tool schemas
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>  │   ├─→ HTTP POST to /api/chat
<a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a>  │   ├─→ Parse tool_calls from response
<a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a>  │   ├─→ Execute tool.call(args)
<a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a>  │   │   ├─→ Validate args against MockAlbum schema
<a href="#__codelineno-1-16" id="__codelineno-1-16" name="__codelineno-1-16"></a>  │   │   ├─→ Create MockAlbum instance
<a href="#__codelineno-1-17" id="__codelineno-1-17" name="__codelineno-1-17"></a>  │   │   └─→ Wrap in ToolOutput
<a href="#__codelineno-1-18" id="__codelineno-1-18" name="__codelineno-1-18"></a>  │   └─→ Create AgentChatResponse with sources
<a href="#__codelineno-1-19" id="__codelineno-1-19" name="__codelineno-1-19"></a>  └─→ AgentChatResponse.parse_tool_outputs(allow_parallel=False)
<a href="#__codelineno-1-20" id="__codelineno-1-20" name="__codelineno-1-20"></a>      ├─→ Extract sources[0].raw_output
<a href="#__codelineno-1-21" id="__codelineno-1-21" name="__codelineno-1-21"></a>      └─→ Return MockAlbum instance
</code></pre></div>
<h3 id="3-parallel-execution-pattern"><a class="toclink" href="#3-parallel-execution-pattern">3. Parallel Execution Pattern</a><a class="headerlink" href="#3-parallel-execution-pattern" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>User → ToolOrchestratingLLM.__call__(..., allow_parallel_tool_calls=True)
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>  ├─→ [Same tool creation and message formatting]
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>  ├─→ Ollama.predict_and_call([tool], ..., allow_parallel=True)
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>  │   ├─→ LLM generates multiple tool_calls
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>  │   ├─→ Execute each tool.call(args)
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>  │   │   ├─→ ToolOutput 1: MockAlbum(title="hello", ...)
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>  │   │   └─→ ToolOutput 2: MockAlbum(title="hello2", ...)
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>  │   └─→ Create AgentChatResponse with multiple sources
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>  └─→ AgentChatResponse.parse_tool_outputs(allow_parallel=True)
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>      ├─→ Extract all sources[i].raw_output
<a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a>      └─→ Return List[MockAlbum]
</code></pre></div>
<h3 id="4-async-execution-pattern"><a class="toclink" href="#4-async-execution-pattern">4. Async Execution Pattern</a><a class="headerlink" href="#4-async-execution-pattern" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>User → await ToolOrchestratingLLM.acall(...)
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>  ├─→ [Same tool creation and message formatting]
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>  ├─→ await Ollama.apredict_and_call([tool], messages, ...)
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>  │   ├─→ Async HTTP request
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>  │   ├─→ Async tool execution
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>  │   └─→ Return AgentChatResponse
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>  └─→ AgentChatResponse.parse_tool_outputs(...)
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>      └─→ Return MockAlbum or List[MockAlbum]
</code></pre></div>
<h3 id="5-streaming-execution-pattern-sync"><a class="toclink" href="#5-streaming-execution-pattern-sync">5. Streaming Execution Pattern (Sync)</a><a class="headerlink" href="#5-streaming-execution-pattern-sync" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>User → for obj in ToolOrchestratingLLM.stream_call(...):
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>  ├─→ [Same tool creation and message formatting]
<a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>  ├─→ Ollama.stream_chat_with_tools([tool], messages, ...)
<a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>  │   └─→ Yields partial ChatResponse chunks
<a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>  └─→ For each chunk:
<a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>      ├─→ StreamingObjectProcessor.process(chunk, cur_objects)
<a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>      │   ├─→ Parse partial tool_calls JSON
<a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>      │   ├─→ Validate against MockAlbum schema (flexible mode)
<a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a>      │   ├─→ Update cur_objects state
<a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a>      │   └─→ Return progressively updated MockAlbum
<a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>      └─→ Yield MockAlbum (partial or complete)
</code></pre></div>
<h3 id="6-async-streaming-pattern"><a class="toclink" href="#6-async-streaming-pattern">6. Async Streaming Pattern</a><a class="headerlink" href="#6-async-streaming-pattern" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>User → async for obj in await ToolOrchestratingLLM.astream_call(...):
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>  ├─→ [Same tool creation and message formatting]
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>  ├─→ await Ollama.astream_chat_with_tools([tool], messages, ...)
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>  │   └─→ Async yields partial ChatResponse chunks
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>  └─→ For each chunk:
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>      ├─→ StreamingObjectProcessor.process(chunk, cur_objects)
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>      └─→ Yield MockAlbum (partial or complete)
</code></pre></div>
<h2 id="state-management"><a class="toclink" href="#state-management">State Management</a><a class="headerlink" href="#state-management" title="Permanent link">#</a></h2>
<h3 id="immutable-state-post-initialization"><a class="toclink" href="#immutable-state-post-initialization">Immutable State (Post-Initialization)</a><a class="headerlink" href="#immutable-state-post-initialization" title="Permanent link">#</a></h3>
<ul>
<li><code>_output_cls</code>: Type[MockAlbum] - Schema for structured output</li>
<li><code>_llm</code>: FunctionCallingLLM - Language model instance</li>
<li><code>_verbose</code>: bool - Logging control</li>
<li><code>_allow_parallel_tool_calls</code>: bool - Single vs. multiple outputs</li>
<li><code>_tool_choice</code>: Optional - Tool selection strategy</li>
</ul>
<h3 id="mutable-state"><a class="toclink" href="#mutable-state">Mutable State</a><a class="headerlink" href="#mutable-state" title="Permanent link">#</a></h3>
<ul>
<li><code>_prompt</code>: BasePromptTemplate - Can be updated via setter</li>
</ul>
<h3 id="transient-state-per-call"><a class="toclink" href="#transient-state-per-call">Transient State (Per Call)</a><a class="headerlink" href="#transient-state-per-call" title="Permanent link">#</a></h3>
<ul>
<li><code>llm_kwargs</code>: Forwarded to LLM methods (temperature, max_tokens, etc.)</li>
<li><code>**kwargs</code>: Template variables for prompt formatting</li>
<li><code>tool</code>: CallableTool instance created from output_cls</li>
<li><code>messages</code>: Formatted and extended message list</li>
<li><code>agent_response</code>: AgentChatResponse from LLM</li>
<li><code>parsed_output</code>: Final MockAlbum or List[MockAlbum]</li>
</ul>
<h3 id="streaming-state-per-stream"><a class="toclink" href="#streaming-state-per-stream">Streaming State (Per Stream)</a><a class="headerlink" href="#streaming-state-per-stream" title="Permanent link">#</a></h3>
<ul>
<li><code>cur_objects</code>: List of partial/complete objects maintained across chunks</li>
<li><code>partial_resp</code>: Current chunk being processed</li>
<li><code>objects</code>: Progressively updated Pydantic instances</li>
</ul>
<h2 id="data-flow-between-components"><a class="toclink" href="#data-flow-between-components">Data Flow Between Components</a><a class="headerlink" href="#data-flow-between-components" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>User Input (kwargs)
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>  ↓
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>ToolOrchestratingLLM
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>  ↓
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>CallableTool (from MockAlbum schema)
<a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>  ↓
<a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>PromptTemplate (formatted with kwargs)
<a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>  ↓
<a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>Messages (List[Message])
<a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>  ↓
<a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>Ollama (extended with system prompts)
<a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>  ↓
<a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>HTTP Request (with tool schemas)
<a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>  ↓
<a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>Ollama Server
<a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a>  ↓
<a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>HTTP Response (with tool_calls)
<a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a>  ↓
<a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a>Ollama (parse and execute tools)
<a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a>  ↓
<a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a>ToolOutput (with raw_output=MockAlbum)
<a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a>  ↓
<a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a>AgentChatResponse (with sources=[ToolOutput])
<a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a>  ↓
<a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>parse_tool_outputs (extract raw_output)
<a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a>  ↓
<a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a>MockAlbum instance or List[MockAlbum]
<a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a>  ↓
<a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a>User Output
</code></pre></div>
<h2 id="error-boundaries"><a class="toclink" href="#error-boundaries">Error Boundaries</a><a class="headerlink" href="#error-boundaries" title="Permanent link">#</a></h2>
<ol>
<li><strong>Initialization</strong>: validate_llm, validate_prompt</li>
<li><strong>Tool Creation</strong>: CallableTool.from_model - schema extraction</li>
<li><strong>Prompt Formatting</strong>: format_messages - template variable errors</li>
<li><strong>LLM Execution</strong>: predict_and_call - network errors, timeout</li>
<li><strong>Tool Parsing</strong>: Parse tool_calls - missing/malformed data</li>
<li><strong>Tool Execution</strong>: Validate args - Pydantic ValidationError</li>
<li><strong>Output Extraction</strong>: parse_tool_outputs - missing raw_output</li>
</ol>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/Serapieum-of-alex/Serapeum" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.footer", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view", "content.tooltips", "search.highlight", "search.suggest", "toc.follow", "announce.dismiss"], "search": "../../../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
<script src="../../../../../../assets/javascripts/panzoom.min.js"></script>
<script src="../../../../../../assets/javascripts/zoompan.js"></script>
</body>
</html>