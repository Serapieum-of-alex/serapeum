%% State Machine: Streaming Response States
stateDiagram-v2
  [*] --> Idle
  Idle --> Streaming: request started
  Streaming --> Buffering: receive deltas
  Buffering --> Parsing: chunk to tokens
  Parsing --> Streaming: more deltas
  Parsing --> Complete: end of stream
  Streaming --> Error: network or protocol error
  Error --> Complete: error handled
