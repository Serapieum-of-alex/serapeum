%% Sequence Diagram: Simple LLM Prediction
sequenceDiagram
  autonumber
  actor User
  participant PT as PromptTemplate
  participant L as LLM
  participant O as Ollama
  participant OP as Output Parser

  User->>L: predict(prompt=PromptTemplate, **prompt_args)
  activate L
  L->>PT: format()/format_messages()
  PT-->>L: formatted prompt/messages
  L->>L: _extend_prompt/_extend_messages
  alt Completion path
    L->>O: complete(prompt)
    O-->>L: CompletionResponse
  else Chat path
    L->>O: chat(messages)
    O-->>L: ChatResponse
  end
  L->>OP: _parse_output(output)
  OP-->>L: parsed text
  L-->>User: Response (str)
  deactivate L
